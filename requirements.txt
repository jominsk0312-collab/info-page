pip install -r requirements.txt

그리고 `chatbot_app.py` 파일을 저장한 후, 다음 명령어로 실행할 수 있습니다.

```bash
streamlit run chatbot_app.py

코드에 포함된 주요 기능은 다음과 같습니다:
* **API 키 관리:** `st.secrets`에서 키를 찾고, 없으면 사이드바에 입력 필드를 제공합니다.
* **모델 선택:** 사이드바에서 `gemini-2.0-flash`, `gemini-2.5-flash` 등 사용 가능한 모델을 선택할 수 있습니다.
* **429 재시도:** API 호출 시 429 (요청 제한) 오류가 발생하면, 지수 백오프 방식을 사용하여 최대 3번까지 자동으로 재시도합니다.
* **컨텍스트 관리:** 전체 대화 기록은 유지하되, LLM에 전달하는 컨텍스트는 **최근 6턴(3쌍)**으로 제한하여 컨텍스트 윈도우 오버플로우를 방지했습니다.
* **CSV 로깅:** 대화 내용을 자동으로 기록하는 옵션이 있으며, 언제든지 CSV 파일로 다운로드할 수 있습니다.
* **대화 초기화:** "대화 초기화 및 새 세션 시작" 버튼을 통해 모든 대화 기록을 지우고 새 세션을 시작할 수 있습니다.